"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{2247:function(e,t,n){n.d(t,{JA:function(){return useListItem},NI:function(){return useInteractions},RB:function(){return FloatingTree},XI:function(){return useHover},YF:function(){return useFloating},bQ:function(){return useDismiss},c0:function(){return useListNavigation},eS:function(){return useClick},jV:function(){return useFloatingNodeId},ll:function(){return FloatingPortal},mN:function(){return FloatingNode},qq:function(){return useMergeRefs},qs:function(){return useRole},vs:function(){return FloatingList},wD:function(){return FloatingFocusManager},xp:function(){return safePolygon}});var r,o=n(7294),u=n(4706),l=n(1347),i=n(5893),s=n(7317),c=n(8388),a=n(3935),f=n(1371);function useMergeRefs(e){let t=o.useRef(void 0),n=o.useCallback(t=>{let n=e.map(e=>{if(null!=e){if("function"==typeof e){let n=e(t);return"function"==typeof n?n:()=>{e(null)}}return e.current=t,()=>{e.current=null}}});return()=>{n.forEach(e=>null==e?void 0:e())}},e);return o.useMemo(()=>e.every(e=>null==e)?null:e=>{t.current&&(t.current(),t.current=void 0),null!=e&&(t.current=n(e))},e)}let d={...r||(r=n.t(o,2))},v=d.useInsertionEffect,m=v||(e=>e());function useEffectEvent(e){let t=o.useRef(()=>{});return m(()=>{t.current=e}),o.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}let g="ArrowUp",p="ArrowDown",b="ArrowLeft",h="ArrowRight";function isDifferentRow(e,t,n){return Math.floor(e/t)!==n}function isIndexOutOfBounds(e,t){return t<0||t>=e.current.length}function getMinIndex(e,t){return findNonDisabledIndex(e,{disabledIndices:t})}function getMaxIndex(e,t){return findNonDisabledIndex(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function findNonDisabledIndex(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:u=1}=void 0===t?{}:t,l=e.current,i=n;do i+=r?-u:u;while(i>=0&&i<=l.length-1&&isDisabled(l,i,o));return i}function isDisabled(e,t,n){if(n)return n.includes(t);let r=e[t];return null==r||r.hasAttribute("disabled")||"true"===r.getAttribute("aria-disabled")}var E="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;function sortByDocumentPosition(e,t){let n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}let y=o.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function FloatingList(e){let{children:t,elementsRef:n,labelsRef:r}=e,[u,l]=o.useState(()=>new Set),s=o.useCallback(e=>{l(t=>new Set(t).add(e))},[]),c=o.useCallback(e=>{l(t=>{let n=new Set(t);return n.delete(e),n})},[]),a=o.useMemo(()=>{let e=new Map,t=Array.from(u.keys()).sort(sortByDocumentPosition);return t.forEach((t,n)=>{e.set(t,n)}),e},[u]);return(0,i.jsx)(y.Provider,{value:o.useMemo(()=>({register:s,unregister:c,map:a,elementsRef:n,labelsRef:r}),[s,c,a,n,r]),children:t})}function useListItem(e){void 0===e&&(e={});let{label:t}=e,{register:n,unregister:r,map:u,elementsRef:l,labelsRef:i}=o.useContext(y),[s,c]=o.useState(null),a=o.useRef(null),f=o.useCallback(e=>{if(a.current=e,null!==s&&(l.current[s]=e,i)){var n;let r=void 0!==t;i.current[s]=r?t:null!=(n=null==e?void 0:e.textContent)?n:null}},[s,l,i,t]);return E(()=>{let e=a.current;if(e)return n(e),()=>{r(e)}},[n,r]),E(()=>{let e=a.current?u.get(a.current):null;null!=e&&c(e)},[u]),o.useMemo(()=>({ref:f,index:null==s?-1:s}),[s,f])}let x=[b,h],R=[g,p];[...x,...R];let M=!1,k=0,genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+k++,w=d.useId,I=w||function(){let[e,t]=o.useState(()=>M?genId():void 0);return E(()=>{null==e&&t(genId())},[]),o.useEffect(()=>{M=!0},[]),e};function createPubSub(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}}let C=o.createContext(null),O=o.createContext(null),useFloatingParentNodeId=()=>{var e;return(null==(e=o.useContext(C))?void 0:e.id)||null},useFloatingTree=()=>o.useContext(O);function useFloatingNodeId(e){let t=I(),n=useFloatingTree(),r=useFloatingParentNodeId(),o=e||r;return E(()=>{if(!t)return;let e={id:t,parentId:o};return null==n||n.addNode(e),()=>{null==n||n.removeNode(e)}},[n,t,o]),t}function FloatingNode(e){let{children:t,id:n}=e,r=useFloatingParentNodeId();return(0,i.jsx)(C.Provider,{value:o.useMemo(()=>({id:n,parentId:r}),[n,r]),children:t})}function FloatingTree(e){let{children:t}=e,n=o.useRef([]),r=o.useCallback(e=>{n.current=[...n.current,e]},[]),u=o.useCallback(e=>{n.current=n.current.filter(t=>t!==e)},[]),l=o.useState(()=>createPubSub())[0];return(0,i.jsx)(O.Provider,{value:o.useMemo(()=>({nodesRef:n,addNode:r,removeNode:u,events:l}),[r,u,l]),children:t})}function createAttribute(e){return"data-floating-ui-"+e}function clearTimeoutIfSet(e){-1!==e.current&&(clearTimeout(e.current),e.current=-1)}function useLatestRef(e){let t=(0,o.useRef)(e);return E(()=>{t.current=e}),t}let F=createAttribute("safe-polygon");function getDelay(e,t,n){return n&&!(0,u.r)(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function useHover(e,t){void 0===t&&(t={});let{open:n,onOpenChange:r,dataRef:l,events:i,elements:c}=e,{enabled:a=!0,delay:f=0,handleClose:d=null,mouseOnly:v=!1,restMs:m=0,move:g=!0}=t,p=useFloatingTree(),b=useFloatingParentNodeId(),h=useLatestRef(d),y=useLatestRef(f),x=useLatestRef(n),R=o.useRef(),M=o.useRef(-1),k=o.useRef(),w=o.useRef(-1),I=o.useRef(!0),C=o.useRef(!1),O=o.useRef(()=>{}),P=o.useRef(!1),L=o.useCallback(()=>{var e;let t=null==(e=l.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t},[l]);o.useEffect(()=>{if(a)return i.on("openchange",onOpenChange),()=>{i.off("openchange",onOpenChange)};function onOpenChange(e){let{open:t}=e;t||(clearTimeoutIfSet(M),clearTimeoutIfSet(w),I.current=!0,P.current=!1)}},[a,i]),o.useEffect(()=>{if(!a||!h.current||!n)return;function onLeave(e){L()&&r(!1,e,"hover")}let e=(0,u.Me)(c.floating).documentElement;return e.addEventListener("mouseleave",onLeave),()=>{e.removeEventListener("mouseleave",onLeave)}},[c.floating,n,r,a,h,L]);let T=o.useCallback(function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");let o=getDelay(y.current,"close",R.current);o&&!k.current?(clearTimeoutIfSet(M),M.current=window.setTimeout(()=>r(!1,e,n),o)):t&&(clearTimeoutIfSet(M),r(!1,e,n))},[y,r]),D=useEffectEvent(()=>{O.current(),k.current=void 0}),S=useEffectEvent(()=>{if(C.current){let e=(0,u.Me)(c.floating).body;e.style.pointerEvents="",e.removeAttribute(F),C.current=!1}}),N=useEffectEvent(()=>!!l.current.openEvent&&["click","mousedown"].includes(l.current.openEvent.type));o.useEffect(()=>{if(a&&(0,s.kK)(c.domReference)){var e;let t=c.domReference;return n&&t.addEventListener("mouseleave",onScrollMouseLeave),null==(e=c.floating)||e.addEventListener("mouseleave",onScrollMouseLeave),g&&t.addEventListener("mousemove",onMouseEnter,{once:!0}),t.addEventListener("mouseenter",onMouseEnter),t.addEventListener("mouseleave",onMouseLeave),()=>{var e;n&&t.removeEventListener("mouseleave",onScrollMouseLeave),null==(e=c.floating)||e.removeEventListener("mouseleave",onScrollMouseLeave),g&&t.removeEventListener("mousemove",onMouseEnter),t.removeEventListener("mouseenter",onMouseEnter),t.removeEventListener("mouseleave",onMouseLeave)}}function onMouseEnter(e){if(clearTimeoutIfSet(M),I.current=!1,v&&!(0,u.r)(R.current)||m>0&&!getDelay(y.current,"open"))return;let t=getDelay(y.current,"open",R.current);t?M.current=window.setTimeout(()=>{x.current||r(!0,e,"hover")},t):n||r(!0,e,"hover")}function onMouseLeave(e){if(N())return;O.current();let t=(0,u.Me)(c.floating);if(clearTimeoutIfSet(w),P.current=!1,h.current&&l.current.floatingContext){n||clearTimeoutIfSet(M),k.current=h.current({...l.current.floatingContext,tree:p,x:e.clientX,y:e.clientY,onClose(){S(),D(),N()||T(e,!0,"safe-polygon")}});let r=k.current;t.addEventListener("mousemove",r),O.current=()=>{t.removeEventListener("mousemove",r)};return}let r="touch"!==R.current||!(0,u.r3)(c.floating,e.relatedTarget);r&&T(e)}function onScrollMouseLeave(e){!N()&&l.current.floatingContext&&(null==h.current||h.current({...l.current.floatingContext,tree:p,x:e.clientX,y:e.clientY,onClose(){S(),D(),N()||T(e)}})(e))}},[c,a,e,v,m,g,T,D,S,r,n,x,p,y,h,l,N]),E(()=>{var e,t;if(a&&n&&null!=(e=h.current)&&e.__options.blockPointerEvents&&L()){C.current=!0;let e=c.floating;if((0,s.kK)(c.domReference)&&e){let n=(0,u.Me)(c.floating).body;n.setAttribute(F,"");let r=c.domReference,o=null==p||null==(t=p.nodesRef.current.find(e=>e.id===b))||null==(t=t.context)?void 0:t.elements.floating;return o&&(o.style.pointerEvents=""),n.style.pointerEvents="none",r.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{n.style.pointerEvents="",r.style.pointerEvents="",e.style.pointerEvents=""}}}},[a,n,b,c,p,h,L]),E(()=>{n||(R.current=void 0,P.current=!1,D(),S())},[n,D,S]),o.useEffect(()=>()=>{D(),clearTimeoutIfSet(M),clearTimeoutIfSet(w),S()},[a,c.domReference,D,S]);let A=o.useMemo(()=>{function setPointerRef(e){R.current=e.pointerType}return{onPointerDown:setPointerRef,onPointerEnter:setPointerRef,onMouseMove(e){let{nativeEvent:t}=e;function handleMouseMove(){I.current||x.current||r(!0,t,"hover")}!(!v||(0,u.r)(R.current))||n||0===m||P.current&&e.movementX**2+e.movementY**2<2||(clearTimeoutIfSet(w),"touch"===R.current?handleMouseMove():(P.current=!0,w.current=window.setTimeout(handleMouseMove,m)))}}},[v,r,n,x,m]),K=o.useMemo(()=>({onMouseEnter(){clearTimeoutIfSet(M)},onMouseLeave(e){N()||T(e.nativeEvent,!1)}}),[T,N]);return o.useMemo(()=>a?{reference:A,floating:K}:{},[a,A,K])}let P=0;function enqueueFocus(e,t){void 0===t&&(t={});let{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(P);let exec=()=>null==e?void 0:e.focus({preventScroll:n});o?exec():P=requestAnimationFrame(exec)}function getAncestors(e,t){var n;let r=[],o=null==(n=e.find(e=>e.id===t))?void 0:n.parentId;for(;o;){let t=e.find(e=>e.id===o);o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}function getChildren(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let L=new WeakMap,T=new WeakSet,D={},S=0,supportsInert=()=>"undefined"!=typeof HTMLElement&&"inert"in HTMLElement.prototype,unwrapHost=e=>e&&(e.host||unwrapHost(e.parentNode)),correctElements=(e,t)=>t.map(t=>{if(e.contains(t))return t;let n=unwrapHost(t);return e.contains(n)?n:null}).filter(e=>null!=e);function markOthers(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);let r=(0,u.Me)(e[0]).body;return function(e,t,n,r){let o="data-floating-ui-inert",u=r?"inert":n?"aria-hidden":null,l=correctElements(t,e),i=new Set,c=new Set(l),a=[];D[o]||(D[o]=new WeakMap);let f=D[o];return l.forEach(function keep(e){!(!e||i.has(e))&&(i.add(e),e.parentNode&&keep(e.parentNode))}),function deep(e){!e||c.has(e)||[].forEach.call(e.children,e=>{if("script"!==(0,s.wk)(e)){if(i.has(e))deep(e);else{let t=u?e.getAttribute(u):null,n=null!==t&&"false"!==t,r=L.get(e)||0,l=u?r+1:r,i=(f.get(e)||0)+1;L.set(e,l),f.set(e,i),a.push(e),1===l&&n&&T.add(e),1===i&&e.setAttribute(o,""),!n&&u&&e.setAttribute(u,"inert"===u?"":"true")}}})}(t),i.clear(),S++,()=>{a.forEach(e=>{let t=L.get(e)||0,n=u?t-1:t,r=(f.get(e)||0)-1;L.set(e,n),f.set(e,r),n||(!T.has(e)&&u&&e.removeAttribute(u),T.delete(e)),r||e.removeAttribute(o)}),--S||(L=new WeakMap,L=new WeakMap,T=new WeakSet,D={})}}(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}let getTabbableOptions=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function getTabbableIn(e,t){let n=(0,c.ht)(e,getTabbableOptions());"prev"===t&&n.reverse();let r=n.indexOf((0,u.AW)((0,u.Me)(e))),o=n.slice(r+1);return o[0]}function getNextTabbable(e){return getTabbableIn((0,u.Me)(e).body,"next")||e}function getPreviousTabbable(e){return getTabbableIn((0,u.Me)(e).body,"prev")||e}function isOutsideEvent(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,u.r3)(n,r)}function enableFocusInside(e){let t=e.querySelectorAll("[data-tabindex]");t.forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let N={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},A=o.forwardRef(function(e,t){let[n,r]=o.useState();E(()=>{(0,u.G6)()&&r("button")},[]);let l={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[createAttribute("focus-guard")]:"",style:N};return(0,i.jsx)("span",{...e,...l})}),K=o.createContext(null),q=createAttribute("portal");function FloatingPortal(e){let{children:t,id:n,root:r,preserveTabOrder:u=!0}=e,l=function(e){void 0===e&&(e={});let{id:t,root:n}=e,r=I(),u=usePortalContext(),[l,i]=o.useState(null),c=o.useRef(null);return E(()=>()=>{null==l||l.remove(),queueMicrotask(()=>{c.current=null})},[l]),E(()=>{if(!r||c.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=r,n.setAttribute(q,""),e.appendChild(n),c.current=n,i(n)},[t,r]),E(()=>{if(null===n||!r||c.current)return;let e=n||(null==u?void 0:u.portalNode);e&&!(0,s.kK)(e)&&(e=e.current),e=e||document.body;let o=null;t&&((o=document.createElement("div")).id=t,e.appendChild(o));let l=document.createElement("div");l.id=r,l.setAttribute(q,""),(e=o||e).appendChild(l),c.current=l,i(l)},[t,n,r,u]),l}({id:n,root:r}),[f,d]=o.useState(null),v=o.useRef(null),m=o.useRef(null),g=o.useRef(null),p=o.useRef(null),b=null==f?void 0:f.modal,h=null==f?void 0:f.open,y=!!f&&!f.modal&&f.open&&u&&!!(r||l);return o.useEffect(()=>{if(l&&u&&!b)return l.addEventListener("focusin",onFocus,!0),l.addEventListener("focusout",onFocus,!0),()=>{l.removeEventListener("focusin",onFocus,!0),l.removeEventListener("focusout",onFocus,!0)};function onFocus(e){if(l&&isOutsideEvent(e)){let t="focusin"===e.type;(t?enableFocusInside:function(e){let t=(0,c.ht)(e,getTabbableOptions());t.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(l)}}},[l,u,b]),o.useEffect(()=>{l&&(h||enableFocusInside(l))},[h,l]),(0,i.jsxs)(K.Provider,{value:o.useMemo(()=>({preserveTabOrder:u,beforeOutsideRef:v,afterOutsideRef:m,beforeInsideRef:g,afterInsideRef:p,portalNode:l,setFocusManagerState:d}),[u,l]),children:[y&&l&&(0,i.jsx)(A,{"data-type":"outside",ref:v,onFocus:e=>{if(isOutsideEvent(e,l)){var t;null==(t=g.current)||t.focus()}else{let e=f?f.domReference:null,t=getPreviousTabbable(e);null==t||t.focus()}}}),y&&l&&(0,i.jsx)("span",{"aria-owns":l.id,style:N}),l&&a.createPortal(t,l),y&&l&&(0,i.jsx)(A,{"data-type":"outside",ref:m,onFocus:e=>{if(isOutsideEvent(e,l)){var t;null==(t=p.current)||t.focus()}else{let t=f?f.domReference:null,n=getNextTabbable(t);null==n||n.focus(),(null==f?void 0:f.closeOnFocusOut)&&(null==f||f.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let usePortalContext=()=>o.useContext(K),B="data-floating-ui-focusable";function getFloatingFocusElement(e){return e?e.hasAttribute(B)?e:e.querySelector("["+B+"]")||e:null}function useLiteMergeRefs(e){return o.useMemo(()=>t=>{e.forEach(e=>{e&&(e.current=t)})},e)}let W=[];function getPreviouslyFocusedElement(){return W.slice().reverse().find(e=>e.isConnected)}let _=o.forwardRef(function(e,t){return(0,i.jsx)("button",{...e,type:"button",ref:t,tabIndex:-1,style:N})});function FloatingFocusManager(e){let{context:t,children:n,disabled:r=!1,order:l=["content"],guards:a=!0,initialFocus:f=0,returnFocus:d=!0,restoreFocus:v=!1,modal:m=!0,visuallyHiddenDismiss:g=!1,closeOnFocusOut:p=!0,outsideElementsInert:b=!1,getInsideElements:h=()=>[]}=e,{open:y,onOpenChange:x,events:R,dataRef:M,elements:{domReference:k,floating:w}}=t,I=useEffectEvent(()=>{var e;return null==(e=M.current.floatingContext)?void 0:e.nodeId}),C=useEffectEvent(h),O="number"==typeof f&&f<0,F=(0,u.Ie)(k)&&O,P=supportsInert(),L=!P||a,T=!L||P&&b,D=useLatestRef(l),S=useLatestRef(f),K=useLatestRef(d),q=useFloatingTree(),B=usePortalContext(),j=o.useRef(null),U=o.useRef(null),V=o.useRef(!1),H=o.useRef(!1),Y=o.useRef(-1),X=null!=B,z=getFloatingFocusElement(w),G=useEffectEvent(function(e){return void 0===e&&(e=z),e?(0,c.ht)(e,getTabbableOptions()):[]}),Z=useEffectEvent(e=>{let t=G(e);return D.current.map(e=>k&&"reference"===e?k:z&&"floating"===e?z:t).filter(Boolean).flat()});o.useEffect(()=>{if(r||!m)return;function onKeyDown(e){if("Tab"===e.key){(0,u.r3)(z,(0,u.AW)((0,u.Me)(z)))&&0===G().length&&!F&&(0,u.p7)(e);let t=Z(),n=(0,u.U9)(e);"reference"===D.current[0]&&n===k&&((0,u.p7)(e),e.shiftKey?enqueueFocus(t[t.length-1]):enqueueFocus(t[1])),"floating"===D.current[1]&&n===z&&e.shiftKey&&((0,u.p7)(e),enqueueFocus(t[0]))}}let e=(0,u.Me)(z);return e.addEventListener("keydown",onKeyDown),()=>{e.removeEventListener("keydown",onKeyDown)}},[r,k,z,m,D,F,G,Z]),o.useEffect(()=>{if(!r&&w)return w.addEventListener("focusin",handleFocusIn),()=>{w.removeEventListener("focusin",handleFocusIn)};function handleFocusIn(e){let t=(0,u.U9)(e),n=G(),r=n.indexOf(t);-1!==r&&(Y.current=r)}},[r,w,G]),o.useEffect(()=>{if(!r&&p&&w&&(0,s.Re)(k))return k.addEventListener("focusout",handleFocusOutside),k.addEventListener("pointerdown",handlePointerDown),w.addEventListener("focusout",handleFocusOutside),()=>{k.removeEventListener("focusout",handleFocusOutside),k.removeEventListener("pointerdown",handlePointerDown),w.removeEventListener("focusout",handleFocusOutside)};function handlePointerDown(){H.current=!0,setTimeout(()=>{H.current=!1})}function handleFocusOutside(e){let t=e.relatedTarget;queueMicrotask(()=>{let n=I(),r=!((0,u.r3)(k,t)||(0,u.r3)(w,t)||(0,u.r3)(t,w)||(0,u.r3)(null==B?void 0:B.portalNode,t)||null!=t&&t.hasAttribute(createAttribute("focus-guard"))||q&&(getChildren(q.nodesRef.current,n).find(e=>{var n,r;return(0,u.r3)(null==(n=e.context)?void 0:n.elements.floating,t)||(0,u.r3)(null==(r=e.context)?void 0:r.elements.domReference,t)})||getAncestors(q.nodesRef.current,n).find(e=>{var n,r,o;return[null==(n=e.context)?void 0:n.elements.floating,getFloatingFocusElement(null==(r=e.context)?void 0:r.elements.floating)].includes(t)||(null==(o=e.context)?void 0:o.elements.domReference)===t})));if(v&&r&&(0,u.AW)((0,u.Me)(z))===(0,u.Me)(z).body){(0,s.Re)(z)&&z.focus();let e=Y.current,t=G(),n=t[e]||t[t.length-1]||z;(0,s.Re)(n)&&n.focus()}(F||!m)&&t&&r&&!H.current&&t!==getPreviouslyFocusedElement()&&(V.current=!0,x(!1,e,"focus-out"))})}},[r,k,w,z,m,q,B,x,p,v,G,F,I]);let J=o.useRef(null),Q=o.useRef(null),$=useLiteMergeRefs([J,null==B?void 0:B.beforeInsideRef]),ee=useLiteMergeRefs([Q,null==B?void 0:B.afterInsideRef]);function renderDismissButton(e){return!r&&g&&m?(0,i.jsx)(_,{ref:"start"===e?j:U,onClick:e=>x(!1,e.nativeEvent),children:"string"==typeof g?g:"Dismiss"}):null}o.useEffect(()=>{var e,t;if(r||!w)return;let n=Array.from((null==B||null==(e=B.portalNode)?void 0:e.querySelectorAll("["+createAttribute("portal")+"]"))||[]),o=q?getAncestors(q.nodesRef.current,I()):[],l=q&&!m?o.map(e=>{var t;return null==(t=e.context)?void 0:t.elements.floating}):[],i=null==(t=o.find(e=>{var t;return(0,u.Ie)((null==(t=e.context)?void 0:t.elements.domReference)||null)}))||null==(t=t.context)?void 0:t.elements.domReference,s=[w,i,...n,...l,...C(),j.current,U.current,J.current,Q.current,null==B?void 0:B.beforeOutsideRef.current,null==B?void 0:B.afterOutsideRef.current,D.current.includes("reference")||F?k:null].filter(e=>null!=e),c=m||F?markOthers(s,!T,T):markOthers(s);return()=>{c()}},[r,k,w,m,D,B,F,L,T,q,I,C]),E(()=>{if(r||!(0,s.Re)(z))return;let e=(0,u.Me)(z),t=(0,u.AW)(e);queueMicrotask(()=>{let e=Z(z),n=S.current,r=("number"==typeof n?e[n]:n.current)||z,o=(0,u.r3)(z,t);O||o||!y||enqueueFocus(r,{preventScroll:r===z})})},[r,y,z,O,Z,S]),E(()=>{if(r||!z)return;let e=!1,t=!1,n=(0,u.Me)(z),o=(0,u.AW)(n),l=M.current,i=l.openEvent;function onOpenChange(n){let{open:r,reason:o,event:l,nested:s}=n;if(r&&(i=l),"escape-key"===o&&(t=!0),["hover","safe-polygon"].includes(o)&&"mouseleave"===l.type&&(V.current=!0),"outside-press"===o){if(s)V.current=!1,e=!0;else if((0,u.Zj)(l)||(0,u.cr)(l))V.current=!1;else{let t=!1;document.createElement("div").focus({get preventScroll(){return t=!0,!1}}),t?(V.current=!1,e=!0):V.current=!0}}}W=W.filter(e=>e.isConnected),o&&"body"!==(0,s.wk)(o)&&(W.push(o),W.length>20&&(W=W.slice(-20))),R.on("openchange",onOpenChange);let a=n.createElement("span");return a.setAttribute("tabindex","-1"),a.setAttribute("aria-hidden","true"),Object.assign(a.style,N),X&&k&&k.insertAdjacentElement("afterend",a),()=>{R.off("openchange",onOpenChange);let r=(0,u.AW)(n),o=(0,u.r3)(w,r)||q&&getChildren(q.nodesRef.current,I()).some(e=>{var t;return(0,u.r3)(null==(t=e.context)?void 0:t.elements.floating,r)});(o||i&&["click","mousedown"].includes(i.type))&&(t=!0);let l="boolean"==typeof K.current?t&&k?k:getPreviouslyFocusedElement()||a:K.current.current||a;queueMicrotask(()=>{let t=function(e){let t=getTabbableOptions();return(0,c.Wq)(e,t)?e:(0,c.ht)(e,t)[0]||e}(l);K.current&&!V.current&&(0,s.Re)(t)&&(t===r||r===n.body||o)&&t.focus({preventScroll:e}),a.remove()})}},[r,w,z,K,M,R,q,X,k,I]),o.useEffect(()=>{queueMicrotask(()=>{V.current=!1})},[r]),E(()=>{if(!r&&B)return B.setFocusManagerState({modal:m,closeOnFocusOut:p,open:y,onOpenChange:x,domReference:k}),()=>{B.setFocusManagerState(null)}},[r,B,m,y,x,p,k]),E(()=>{if(r||!z||"function"!=typeof MutationObserver||O)return;let handleMutation=()=>{let e=z.getAttribute("tabindex"),t=G(),n=(0,u.AW)((0,u.Me)(w)),r=t.indexOf(n);-1!==r&&(Y.current=r),D.current.includes("floating")||n!==k&&0===t.length?"0"!==e&&z.setAttribute("tabindex","0"):"-1"!==e&&z.setAttribute("tabindex","-1")};handleMutation();let e=new MutationObserver(handleMutation);return e.observe(z,{childList:!0,subtree:!0,attributes:!0}),()=>{e.disconnect()}},[r,w,z,k,D,G,O]);let et=!r&&L&&(!m||!F)&&(X||m);return(0,i.jsxs)(i.Fragment,{children:[et&&(0,i.jsx)(A,{"data-type":"inside",ref:$,onFocus:e=>{if(m){let e=Z();enqueueFocus("reference"===l[0]?e[0]:e[e.length-1])}else if(null!=B&&B.preserveTabOrder&&B.portalNode){if(V.current=!1,isOutsideEvent(e,B.portalNode)){let e=getNextTabbable(k);null==e||e.focus()}else{var t;null==(t=B.beforeOutsideRef.current)||t.focus()}}}}),!F&&renderDismissButton("start"),n,renderDismissButton("end"),et&&(0,i.jsx)(A,{"data-type":"inside",ref:ee,onFocus:e=>{if(m)enqueueFocus(Z()[0]);else if(null!=B&&B.preserveTabOrder&&B.portalNode){if(p&&(V.current=!0),isOutsideEvent(e,B.portalNode)){let e=getPreviousTabbable(k);null==e||e.focus()}else{var t;null==(t=B.afterOutsideRef.current)||t.focus()}}}})]})}function isButtonTarget(e){return(0,s.Re)(e.target)&&"BUTTON"===e.target.tagName}function useClick(e,t){void 0===t&&(t={});let{open:n,onOpenChange:r,dataRef:l,elements:{domReference:i}}=e,{enabled:c=!0,event:a="click",toggle:f=!0,ignoreMouse:d=!1,keyboardHandlers:v=!0,stickIfOpen:m=!0}=t,g=o.useRef(),p=o.useRef(!1),b=o.useMemo(()=>({onPointerDown(e){g.current=e.pointerType},onMouseDown(e){let t=g.current;0===e.button&&"click"!==a&&((0,u.r)(t,!0)&&d||(n&&f&&(!l.current.openEvent||!m||"mousedown"===l.current.openEvent.type)?r(!1,e.nativeEvent,"click"):(e.preventDefault(),r(!0,e.nativeEvent,"click"))))},onClick(e){let t=g.current;if("mousedown"===a&&g.current){g.current=void 0;return}(0,u.r)(t,!0)&&d||(n&&f&&(!l.current.openEvent||!m||"click"===l.current.openEvent.type)?r(!1,e.nativeEvent,"click"):r(!0,e.nativeEvent,"click"))},onKeyDown(e){g.current=void 0,!(e.defaultPrevented||!v||isButtonTarget(e))&&(" "!==e.key||(0,u.j7)(i)||(e.preventDefault(),p.current=!0),(0,s.Re)(e.target)&&"A"===e.target.tagName||"Enter"!==e.key||(n&&f?r(!1,e.nativeEvent,"click"):r(!0,e.nativeEvent,"click")))},onKeyUp(e){!(e.defaultPrevented||!v||isButtonTarget(e)||(0,u.j7)(i))&&" "===e.key&&p.current&&(p.current=!1,n&&f?r(!1,e.nativeEvent,"click"):r(!0,e.nativeEvent,"click"))}}),[l,i,a,d,v,r,n,m,f]);return o.useMemo(()=>c?{reference:b}:{},[c,b])}let j={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},U={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeProp=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function useDismiss(e,t){void 0===t&&(t={});let{open:n,onOpenChange:r,elements:l,dataRef:i}=e,{enabled:c=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:v=!1,referencePressEvent:m="pointerdown",ancestorScroll:g=!1,bubbles:p,capture:b}=t,h=useFloatingTree(),E=useEffectEvent("function"==typeof f?f:()=>!1),y="function"==typeof f?E:f,x=o.useRef(!1),R=o.useRef(!1),{escapeKey:M,outsidePress:k}=normalizeProp(p),{escapeKey:w,outsidePress:I}=normalizeProp(b),C=o.useRef(!1),O=useEffectEvent(e=>{var t;if(!n||!c||!a||"Escape"!==e.key||C.current)return;let o=null==(t=i.current.floatingContext)?void 0:t.nodeId,l=h?getChildren(h.nodesRef.current,o):[];if(!M&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}r(!1,(0,u.MM)(e)?e.nativeEvent:e,"escape-key")}),F=useEffectEvent(e=>{var t;let callback=()=>{var t;O(e),null==(t=(0,u.U9)(e))||t.removeEventListener("keydown",callback)};null==(t=(0,u.U9)(e))||t.addEventListener("keydown",callback)}),P=useEffectEvent(e=>{var t;let n=x.current;x.current=!1;let o=R.current;if(R.current=!1,"click"===d&&o||n||"function"==typeof y&&!y(e))return;let c=(0,u.U9)(e),a="["+createAttribute("inert")+"]",f=(0,u.Me)(l.floating).querySelectorAll(a),v=(0,s.kK)(c)?c:null;for(;v&&!(0,s.Py)(v);){let e=(0,s.Ow)(v);if((0,s.Py)(e)||!(0,s.kK)(e))break;v=e}if(f.length&&(0,s.kK)(c)&&!(0,u.ex)(c)&&!(0,u.r3)(c,l.floating)&&Array.from(f).every(e=>!(0,u.r3)(v,e)))return;if((0,s.Re)(c)&&D){let t=(0,s.Py)(c),n=(0,s.Dx)(c),r=/auto|scroll/,o=t||r.test(n.overflowX),u=t||r.test(n.overflowY),l=o&&c.clientWidth>0&&c.scrollWidth>c.clientWidth,i=u&&c.clientHeight>0&&c.scrollHeight>c.clientHeight,a="rtl"===n.direction,f=i&&(a?e.offsetX<=c.offsetWidth-c.clientWidth:e.offsetX>c.clientWidth),d=l&&e.offsetY>c.clientHeight;if(f||d)return}let m=null==(t=i.current.floatingContext)?void 0:t.nodeId,g=h&&getChildren(h.nodesRef.current,m).some(t=>{var n;return(0,u.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,u.Pe)(e,l.floating)||(0,u.Pe)(e,l.domReference)||g)return;let p=h?getChildren(h.nodesRef.current,m):[];if(p.length>0){let e=!0;if(p.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}r(!1,e,"outside-press")}),L=useEffectEvent(e=>{var t;let callback=()=>{var t;P(e),null==(t=(0,u.U9)(e))||t.removeEventListener(d,callback)};null==(t=(0,u.U9)(e))||t.addEventListener(d,callback)});o.useEffect(()=>{if(!n||!c)return;i.current.__escapeKeyBubbles=M,i.current.__outsidePressBubbles=k;let e=-1;function onScroll(e){r(!1,e,"ancestor-scroll")}function handleCompositionStart(){window.clearTimeout(e),C.current=!0}function handleCompositionEnd(){e=window.setTimeout(()=>{C.current=!1},(0,s.Pf)()?5:0)}let t=(0,u.Me)(l.floating);a&&(t.addEventListener("keydown",w?F:O,w),t.addEventListener("compositionstart",handleCompositionStart),t.addEventListener("compositionend",handleCompositionEnd)),y&&t.addEventListener(d,I?L:P,I);let o=[];return g&&((0,s.kK)(l.domReference)&&(o=(0,s.Kx)(l.domReference)),(0,s.kK)(l.floating)&&(o=o.concat((0,s.Kx)(l.floating))),!(0,s.kK)(l.reference)&&l.reference&&l.reference.contextElement&&(o=o.concat((0,s.Kx)(l.reference.contextElement)))),(o=o.filter(e=>{var n;return e!==(null==(n=t.defaultView)?void 0:n.visualViewport)})).forEach(e=>{e.addEventListener("scroll",onScroll,{passive:!0})}),()=>{a&&(t.removeEventListener("keydown",w?F:O,w),t.removeEventListener("compositionstart",handleCompositionStart),t.removeEventListener("compositionend",handleCompositionEnd)),y&&t.removeEventListener(d,I?L:P,I),o.forEach(e=>{e.removeEventListener("scroll",onScroll)}),window.clearTimeout(e)}},[i,l,a,y,d,n,r,g,c,M,k,O,w,F,P,I,L]),o.useEffect(()=>{x.current=!1},[y,d]);let T=o.useMemo(()=>({onKeyDown:O,...v&&{[j[m]]:e=>{r(!1,e.nativeEvent,"reference-press")},..."click"!==m&&{onClick(e){r(!1,e.nativeEvent,"reference-press")}}}}),[O,r,v,m]),D=o.useMemo(()=>({onKeyDown:O,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[U[d]]:()=>{x.current=!0}}),[O,d]);return o.useMemo(()=>c?{reference:T,floating:D}:{},[c,T,D])}function useFloating(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:r}=e,u=I(),l=o.useRef({}),[i]=o.useState(()=>createPubSub()),s=null!=useFloatingParentNodeId(),[c,a]=o.useState(r.reference),f=useEffectEvent((e,t,r)=>{l.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)}),d=o.useMemo(()=>({setPositionReference:a}),[]),v=o.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return o.useMemo(()=>({dataRef:l,open:t,onOpenChange:f,elements:v,events:i,floatingId:u,refs:d}),[t,f,v,i,u,d])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,u=r.elements,[l,i]=o.useState(null),[c,a]=o.useState(null),d=null==u?void 0:u.domReference,v=d||l,m=o.useRef(null),g=useFloatingTree();E(()=>{v&&(m.current=v)},[v]);let p=(0,f.YF)({...e,elements:{...u,...c&&{reference:c}}}),b=o.useCallback(e=>{let t=(0,s.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;a(t),p.refs.setReference(t)},[p.refs]),h=o.useCallback(e=>{((0,s.kK)(e)||null===e)&&(m.current=e,i(e)),((0,s.kK)(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!(0,s.kK)(e))&&p.refs.setReference(e)},[p.refs]),y=o.useMemo(()=>({...p.refs,setReference:h,setPositionReference:b,domReference:m}),[p.refs,h,b]),x=o.useMemo(()=>({...p.elements,domReference:v}),[p.elements,v]),R=o.useMemo(()=>({...p,...r,refs:y,elements:x,nodeId:t}),[p,y,x,t,r]);return E(()=>{r.dataRef.current.floatingContext=R;let e=null==g?void 0:g.nodesRef.current.find(e=>e.id===t);e&&(e.context=R)}),o.useMemo(()=>({...p,context:R,refs:y,elements:x}),[p,y,x,R])}let V="active",H="selected";function mergeProps(e,t,n){let r=new Map,o="item"===n,u=e;if(o&&e){let{[V]:t,[H]:n,...r}=e;u=r}return{..."floating"===n&&{tabIndex:-1,[B]:""},...u,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,u]=t;if(!(o&&[V,H].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof u){var l;null==(l=r.get(n))||l.push(u),e[n]=function(){for(var e,t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=u}}),e),{})}}function useInteractions(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),r=e.map(e=>null==e?void 0:e.item),u=o.useCallback(t=>mergeProps(t,e,"reference"),t),l=o.useCallback(t=>mergeProps(t,e,"floating"),n),i=o.useCallback(t=>mergeProps(t,e,"item"),r);return o.useMemo(()=>({getReferenceProps:u,getFloatingProps:l,getItemProps:i}),[u,l,i])}function doSwitch(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function isMainOrientationKey(e,t){let n=e===g||e===p,r=e===b||e===h;return doSwitch(t,n,r)}function isMainOrientationToEndKey(e,t,n){let r=e===p,o=n?e===b:e===h;return doSwitch(t,r,o)||"Enter"===e||" "===e||""===e}function isCrossOrientationOpenKey(e,t,n){let r=n?e===b:e===h,o=e===p;return doSwitch(t,r,o)}function isCrossOrientationCloseKey(e,t,n,r){let o=n?e===h:e===b;return"both"===t||"horizontal"===t&&r&&r>1?"Escape"===e:doSwitch(t,o,e===g)}function useListNavigation(e,t){let{open:n,onOpenChange:r,elements:i}=e,{listRef:c,activeIndex:a,onNavigate:f=()=>{},enabled:d=!0,selectedIndex:v=null,allowEscape:m=!1,loop:y=!1,nested:x=!1,rtl:R=!1,virtual:M=!1,focusItemOnOpen:k="auto",focusItemOnHover:w=!0,openOnArrowKeyDown:I=!0,disabledIndices:C,orientation:O="vertical",cols:F=1,scrollItemIntoView:P=!0,virtualItemRef:L,itemSizes:T,dense:D=!1}=t,S=getFloatingFocusElement(i.floating),N=useLatestRef(S),A=useFloatingParentNodeId(),K=useFloatingTree();E(()=>{e.dataRef.current.orientation=O},[e,O]);let q=useEffectEvent(()=>{f(-1===_.current?null:_.current)}),B=(0,u.Ie)(i.domReference),W=o.useRef(k),_=o.useRef(null!=v?v:-1),j=o.useRef(null),U=o.useRef(!0),V=o.useRef(q),H=o.useRef(!!i.floating),Y=o.useRef(n),X=o.useRef(!1),z=o.useRef(!1),G=useLatestRef(C),Z=useLatestRef(n),J=useLatestRef(P),Q=useLatestRef(v),[$,ee]=o.useState(),[et,en]=o.useState(),er=useEffectEvent(()=>{function runFocus(e){M?(ee(e.id),null==K||K.events.emit("virtualfocus",e),L&&(L.current=e)):enqueueFocus(e,{sync:X.current,preventScroll:!0})}let e=c.current[_.current];e&&runFocus(e);let t=X.current?e=>e():requestAnimationFrame;t(()=>{let t=c.current[_.current]||e;if(!t)return;e||runFocus(t);let n=J.current,r=n&&eu&&(z.current||!U.current);r&&(null==t.scrollIntoView||t.scrollIntoView("boolean"==typeof n?{block:"nearest",inline:"nearest"}:n))})});E(()=>{d&&(n&&i.floating?W.current&&null!=v&&(z.current=!0,_.current=v,q()):H.current&&(_.current=-1,V.current()))},[d,n,i.floating,v,q]),E(()=>{if(d&&n&&i.floating){if(null==a){if(X.current=!1,null==Q.current&&(H.current&&(_.current=-1,er()),(!Y.current||!H.current)&&W.current&&(null!=j.current||!0===W.current&&null==j.current))){let e=0,waitForListPopulated=()=>{if(null==c.current[0]){if(e<2){let t=e?requestAnimationFrame:queueMicrotask;t(waitForListPopulated)}e++}else _.current=null==j.current||isMainOrientationToEndKey(j.current,O,R)||x?getMinIndex(c,G.current):getMaxIndex(c,G.current),j.current=null,q()};waitForListPopulated()}}else isIndexOutOfBounds(c,a)||(_.current=a,er(),z.current=!1)}},[d,n,i.floating,a,Q,x,c,O,R,q,er,G]),E(()=>{var e;if(!d||i.floating||!K||M||!H.current)return;let t=K.nodesRef.current,n=null==(e=t.find(e=>e.id===A))||null==(e=e.context)?void 0:e.elements.floating,r=(0,u.AW)((0,u.Me)(i.floating)),o=t.some(e=>e.context&&(0,u.r3)(e.context.elements.floating,r));n&&!o&&U.current&&n.focus({preventScroll:!0})},[d,i.floating,K,A,M]),E(()=>{if(d&&K&&M&&!A)return K.events.on("virtualfocus",handleVirtualFocus),()=>{K.events.off("virtualfocus",handleVirtualFocus)};function handleVirtualFocus(e){en(e.id),L&&(L.current=e)}},[d,K,M,A,L]),E(()=>{V.current=q,Y.current=n,H.current=!!i.floating}),E(()=>{n||(j.current=null)},[n]);let eo=null!=a,eu=o.useMemo(()=>{function syncCurrentTarget(e){if(!n)return;let t=c.current.indexOf(e);-1!==t&&_.current!==t&&(_.current=t,q())}let e={onFocus(e){let{currentTarget:t}=e;X.current=!0,syncCurrentTarget(t)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...w&&{onMouseMove(e){let{currentTarget:t}=e;X.current=!0,z.current=!1,syncCurrentTarget(t)},onPointerLeave(e){let{pointerType:t}=e;if(U.current&&"touch"!==t&&(X.current=!0,_.current=-1,q(),!M)){var n;null==(n=N.current)||n.focus({preventScroll:!0})}}}};return e},[n,N,w,c,q,M]),el=useEffectEvent(e=>{if(U.current=!1,X.current=!0,229===e.which||!Z.current&&e.currentTarget===N.current)return;if(x&&isCrossOrientationCloseKey(e.key,O,R,F)){(0,u.p7)(e),r(!1,e.nativeEvent,"list-navigation"),(0,s.Re)(i.domReference)&&(M?null==K||K.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}let t=_.current,o=getMinIndex(c,C),a=getMaxIndex(c,C);if(B||("Home"===e.key&&((0,u.p7)(e),_.current=o,q()),"End"===e.key&&((0,u.p7)(e),_.current=a,q())),F>1){var f;let t=T||Array.from({length:c.current.length},()=>({width:1,height:1})),n=function(e,t,n){let r=[],o=0;return e.forEach((e,u)=>{let{width:l,height:i}=e,s=!1;for(n&&(o=0);!s;){let e=[];for(let n=0;n<l;n++)for(let r=0;r<i;r++)e.push(o+n+r*t);o%t+l<=t&&e.every(e=>null==r[e])?(e.forEach(e=>{r[e]=u}),s=!0):o++}}),[...r]}(t,F,D),r=n.findIndex(e=>null!=e&&!isDisabled(c.current,e,C)),i=n.reduce((e,t,n)=>null==t||isDisabled(c.current,t,C)?e:n,-1),s=n[function(e,t){let{event:n,orientation:r,loop:o,rtl:i,cols:s,disabledIndices:c,minIndex:a,maxIndex:f,prevIndex:d,stopEvent:v=!1}=t,m=d;if(n.key===g){if(v&&(0,u.p7)(n),-1===d)m=f;else if(m=findNonDisabledIndex(e,{startingIndex:m,amount:s,decrement:!0,disabledIndices:c}),o&&(d-s<a||m<0)){let e=d%s,t=f%s,n=f-(t-e);m=t===e?f:t>e?n:n-s}isIndexOutOfBounds(e,m)&&(m=d)}if(n.key===p&&(v&&(0,u.p7)(n),-1===d?m=a:(m=findNonDisabledIndex(e,{startingIndex:d,amount:s,disabledIndices:c}),o&&d+s>f&&(m=findNonDisabledIndex(e,{startingIndex:d%s-s,amount:s,disabledIndices:c}))),isIndexOutOfBounds(e,m)&&(m=d)),"both"===r){let t=(0,l.GW)(d/s);n.key===(i?b:h)&&(v&&(0,u.p7)(n),d%s!=s-1?(m=findNonDisabledIndex(e,{startingIndex:d,disabledIndices:c}),o&&isDifferentRow(m,s,t)&&(m=findNonDisabledIndex(e,{startingIndex:d-d%s-1,disabledIndices:c}))):o&&(m=findNonDisabledIndex(e,{startingIndex:d-d%s-1,disabledIndices:c})),isDifferentRow(m,s,t)&&(m=d)),n.key===(i?h:b)&&(v&&(0,u.p7)(n),d%s!=0?(m=findNonDisabledIndex(e,{startingIndex:d,decrement:!0,disabledIndices:c}),o&&isDifferentRow(m,s,t)&&(m=findNonDisabledIndex(e,{startingIndex:d+(s-d%s),decrement:!0,disabledIndices:c}))):o&&(m=findNonDisabledIndex(e,{startingIndex:d+(s-d%s),decrement:!0,disabledIndices:c})),isDifferentRow(m,s,t)&&(m=d));let r=(0,l.GW)(f/s)===t;isIndexOutOfBounds(e,m)&&(m=o&&r?n.key===(i?h:b)?f:findNonDisabledIndex(e,{startingIndex:d-d%s-1,disabledIndices:c}):d)}return m}({current:n.map(e=>null!=e?c.current[e]:null)},{event:e,orientation:O,loop:y,rtl:R,cols:F,disabledIndices:(f=[...C||c.current.map((e,t)=>isDisabled(c.current,t)?t:void 0),void 0],n.flatMap((e,t)=>f.includes(e)?[t]:[])),minIndex:r,maxIndex:i,prevIndex:function(e,t,n,r,o){if(-1===e)return -1;let u=n.indexOf(e),l=t[e];switch(o){case"tl":return u;case"tr":if(!l)return u;return u+l.width-1;case"bl":if(!l)return u;return u+(l.height-1)*r;case"br":return n.lastIndexOf(e)}}(_.current>a?o:_.current,t,n,F,e.key===p?"bl":e.key===(R?b:h)?"tr":"tl"),stopEvent:!0})];if(null!=s&&(_.current=s,q()),"both"===O)return}if(isMainOrientationKey(e.key,O)){if((0,u.p7)(e),n&&!M&&(0,u.AW)(e.currentTarget.ownerDocument)===e.currentTarget){_.current=isMainOrientationToEndKey(e.key,O,R)?o:a,q();return}isMainOrientationToEndKey(e.key,O,R)?y?_.current=t>=a?m&&t!==c.current.length?-1:o:findNonDisabledIndex(c,{startingIndex:t,disabledIndices:C}):_.current=Math.min(a,findNonDisabledIndex(c,{startingIndex:t,disabledIndices:C})):y?_.current=t<=o?m&&-1!==t?c.current.length:a:findNonDisabledIndex(c,{startingIndex:t,decrement:!0,disabledIndices:C}):_.current=Math.max(o,findNonDisabledIndex(c,{startingIndex:t,decrement:!0,disabledIndices:C})),isIndexOutOfBounds(c,_.current)&&(_.current=-1),q()}}),ei=o.useMemo(()=>M&&n&&eo&&{"aria-activedescendant":et||$},[M,n,eo,et,$]),es=o.useMemo(()=>({"aria-orientation":"both"===O?void 0:O,...B?{}:ei,onKeyDown:el,onPointerMove(){U.current=!0}}),[ei,el,O,B]),ec=o.useMemo(()=>{function checkVirtualMouse(e){"auto"===k&&(0,u.Zj)(e.nativeEvent)&&(W.current=!0)}function checkVirtualPointer(e){W.current=k,"auto"===k&&(0,u.cr)(e.nativeEvent)&&(W.current=!0)}return{...ei,onKeyDown(e){var t,o,l,i,s,a;U.current=!1;let f=e.key.startsWith("Arrow"),d=["Home","End"].includes(e.key),m=null==K||null==(t=K.nodesRef.current.find(e=>e.id===A))||null==(t=t.context)||null==(t=t.dataRef)?void 0:t.current.orientation,g=isCrossOrientationOpenKey(e.key,O,R),p=isCrossOrientationCloseKey(e.key,O,R,F),b=isCrossOrientationOpenKey(e.key,m,R),h=isMainOrientationKey(e.key,O),E=(x?b:h)||"Enter"===e.key||""===e.key.trim();if(M&&n){let t,n;let r=null==K?void 0:K.nodesRef.current.find(e=>null==e.parentId),v=K&&r?(s=K.nodesRef.current,a=r.id,n=-1,!function findDeepest(e,r){r>n&&(t=e,n=r);let o=getChildren(s,e);o.forEach(e=>{findDeepest(e.id,r+1)})}(a,0),s.find(e=>e.id===t)):null;if((f||d)&&v&&L){let t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(g||p){let n=(null==(o=v.context)?void 0:o.elements.domReference)===e.currentTarget,r=p&&!n?null==(l=v.context)?void 0:l.elements.domReference:g?c.current.find(e=>(null==e?void 0:e.id)===$):null;r&&((0,u.p7)(e),r.dispatchEvent(t),en(void 0))}if((h||d)&&v.context&&v.context.open&&v.parentId&&e.currentTarget!==v.context.elements.domReference){(0,u.p7)(e),null==(i=v.context.elements.domReference)||i.dispatchEvent(t);return}}return el(e)}if(n||I||!f){if(E){let t=isMainOrientationKey(e.key,m);j.current=x&&t?null:e.key}if(x){b&&((0,u.p7)(e),n?(_.current=getMinIndex(c,G.current),q()):r(!0,e.nativeEvent,"list-navigation"));return}h&&(null!=v&&(_.current=v),(0,u.p7)(e),!n&&I?r(!0,e.nativeEvent,"list-navigation"):el(e),n&&q())}},onFocus(){n&&!M&&(_.current=-1,q())},onPointerDown:checkVirtualPointer,onPointerEnter:checkVirtualPointer,onMouseDown:checkVirtualMouse,onClick:checkVirtualMouse}},[$,ei,F,el,G,k,c,x,q,r,n,I,O,A,R,v,K,M,L]);return o.useMemo(()=>d?{reference:ec,floating:es,item:eu}:{},[d,ec,es,eu])}let Y=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function useRole(e,t){var n;void 0===t&&(t={});let{open:r,floatingId:u}=e,{enabled:l=!0,role:i="dialog"}=t,s=null!=(n=Y.get(i))?n:i,c=I(),a=useFloatingParentNodeId(),f=null!=a,d=o.useMemo(()=>"tooltip"===s||"label"===i?{["aria-"+("label"===i?"labelledby":"describedby")]:r?u:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===s?"dialog":s,"aria-controls":r?u:void 0,..."listbox"===s&&{role:"combobox"},..."menu"===s&&{id:c},..."menu"===s&&f&&{role:"menuitem"},..."select"===i&&{"aria-autocomplete":"none"},..."combobox"===i&&{"aria-autocomplete":"list"}},[s,u,f,r,c,i]),v=o.useMemo(()=>{let e={id:u,...s&&{role:s}};return"tooltip"===s||"label"===i?e:{...e,..."menu"===s&&{"aria-labelledby":c}}},[s,u,c,i]),m=o.useCallback(e=>{let{active:t,selected:n}=e,r={role:"option",...t&&{id:u+"-option"}};switch(i){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}},[u,i]);return o.useMemo(()=>l?{reference:d,floating:v,item:m}:{},[l,d,v,m])}function isPointInPolygon(e,t){let[n,r]=e,o=!1,u=t.length;for(let e=0,l=u-1;e<u;l=e++){let[u,i]=t[e]||[0,0],[s,c]=t[l]||[0,0],a=i>=r!=c>=r&&n<=(s-u)*(r-i)/(c-i)+u;a&&(o=!o)}return o}function safePolygon(e){let t;void 0===e&&(e={});let{buffer:n=.5,blockPointerEvents:r=!1,requireIntent:o=!0}=e,l=!1,i=null,c=null,a=performance.now(),fn=e=>{let{x:r,y:f,placement:d,elements:v,onClose:m,nodeId:g,tree:p}=e;return function(e){function close(){clearTimeout(t),m()}if(clearTimeout(t),!v.domReference||!v.floating||null==d||null==r||null==f)return;let{clientX:b,clientY:h}=e,E=[b,h],y=(0,u.U9)(e),x="mouseleave"===e.type,R=(0,u.r3)(v.floating,y),M=(0,u.r3)(v.domReference,y),k=v.domReference.getBoundingClientRect(),w=v.floating.getBoundingClientRect(),I=d.split("-")[0],C=r>w.right-w.width/2,O=f>w.bottom-w.height/2,F=E[0]>=k.x&&E[0]<=k.x+k.width&&E[1]>=k.y&&E[1]<=k.y+k.height,P=w.width>k.width,L=w.height>k.height,T=(P?k:w).left,D=(P?k:w).right,S=(L?k:w).top,N=(L?k:w).bottom;if(R&&(l=!0,!x))return;if(M&&(l=!1),M&&!x){l=!0;return}if(x&&(0,s.kK)(e.relatedTarget)&&(0,u.r3)(v.floating,e.relatedTarget)||p&&getChildren(p.nodesRef.current,g).some(e=>{let{context:t}=e;return null==t?void 0:t.open}))return;if("top"===I&&f>=k.bottom-1||"bottom"===I&&f<=k.top+1||"left"===I&&r>=k.right-1||"right"===I&&r<=k.left+1)return close();let A=[];switch(I){case"top":A=[[T,k.top+1],[T,w.bottom-1],[D,w.bottom-1],[D,k.top+1]];break;case"bottom":A=[[T,w.top+1],[T,k.bottom-1],[D,k.bottom-1],[D,w.top+1]];break;case"left":A=[[w.right-1,N],[w.right-1,S],[k.left+1,S],[k.left+1,N]];break;case"right":A=[[k.right-1,N],[k.right-1,S],[w.left+1,S],[w.left+1,N]]}if(!isPointInPolygon([b,h],A)){if(l&&!F)return close();if(!x&&o){let t=function(e,t){let n=performance.now(),r=n-a;if(null===i||null===c||0===r)return i=e,c=t,a=n,null;let o=e-i,u=t-c;return i=e,c=t,a=n,Math.sqrt(o*o+u*u)/r}(e.clientX,e.clientY);if(null!==t&&t<.1)return close()}isPointInPolygon([b,h],function(e){let[t,r]=e;switch(I){case"top":{let e=[[w.left,C?w.bottom-n:P?w.bottom-n:w.top],[w.right,C?P?w.bottom-n:w.top:w.bottom-n]];return[[P?t+n/2:C?t+4*n:t-4*n,r+n+1],[P?t-n/2:C?t+4*n:t-4*n,r+n+1],...e]}case"bottom":{let e=[[w.left,C?w.top+n:P?w.top+n:w.bottom],[w.right,C?P?w.top+n:w.bottom:w.top+n]];return[[P?t+n/2:C?t+4*n:t-4*n,r-n],[P?t-n/2:C?t+4*n:t-4*n,r-n],...e]}case"left":{let e=[[O?w.right-n:L?w.right-n:w.left,w.top],[O?L?w.right-n:w.left:w.right-n,w.bottom]];return[...e,[t+n+1,L?r+n/2:O?r+4*n:r-4*n],[t+n+1,L?r-n/2:O?r+4*n:r-4*n]]}case"right":{let e=[[O?w.left+n:L?w.left+n:w.right,w.top],[O?L?w.left+n:w.right:w.left+n,w.bottom]];return[[t-n,L?r+n/2:O?r+4*n:r-4*n],[t-n,L?r-n/2:O?r+4*n:r-4*n],...e]}}}([r,f]))?!l&&o&&(t=window.setTimeout(close,40)):close()}}};return fn.__options={blockPointerEvents:r},fn}}}]);