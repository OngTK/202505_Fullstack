"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{7120:function(e,t,n){n.d(t,{NI:function(){return useInteractions},YF:function(){return useFloating},bQ:function(){return useDismiss},ll:function(){return FloatingPortal},qq:function(){return useMergeRefs},qs:function(){return useRole},wD:function(){return FloatingFocusManager}});var r,o=n(7294),u=n(6207),l=n(5893),i=n(7317),s=n(8388),c=n(3935),a=n(1371);function useMergeRefs(e){let t=o.useRef(void 0),n=o.useCallback(t=>{let n=e.map(e=>{if(null!=e){if("function"==typeof e){let n=e(t);return"function"==typeof n?n:()=>{e(null)}}return e.current=t,()=>{e.current=null}}});return()=>{n.forEach(e=>null==e?void 0:e())}},e);return o.useMemo(()=>e.every(e=>null==e)?null:e=>{t.current&&(t.current(),t.current=void 0),null!=e&&(t.current=n(e))},e)}let f={...r||(r=n.t(o,2))},d=f.useInsertionEffect,v=d||(e=>e());function useEffectEvent(e){let t=o.useRef(()=>{});return v(()=>{t.current=e}),o.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var p="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;let m=!1,b=0,genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+b++,g=f.useId,E=g||function(){let[e,t]=o.useState(()=>m?genId():void 0);return p(()=>{null==e&&t(genId())},[]),o.useEffect(()=>{m=!0},[]),e},h=o.createContext(null),x=o.createContext(null),useFloatingParentNodeId=()=>{var e;return(null==(e=o.useContext(h))?void 0:e.id)||null},useFloatingTree=()=>o.useContext(x);function createAttribute(e){return"data-floating-ui-"+e}function useLatestRef(e){let t=(0,o.useRef)(e);return p(()=>{t.current=e}),t}let y=0;function enqueueFocus(e,t){void 0===t&&(t={});let{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(y);let exec=()=>null==e?void 0:e.focus({preventScroll:n});o?exec():y=requestAnimationFrame(exec)}function getAncestors(e,t){var n;let r=[],o=null==(n=e.find(e=>e.id===t))?void 0:n.parentId;for(;o;){let t=e.find(e=>e.id===o);o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}function getChildren(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let R=new WeakMap,k=new WeakSet,w={},M=0,supportsInert=()=>"undefined"!=typeof HTMLElement&&"inert"in HTMLElement.prototype,unwrapHost=e=>e&&(e.host||unwrapHost(e.parentNode)),correctElements=(e,t)=>t.map(t=>{if(e.contains(t))return t;let n=unwrapHost(t);return e.contains(n)?n:null}).filter(e=>null!=e);function markOthers(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);let r=(0,u.Me)(e[0]).body;return function(e,t,n,r){let o="data-floating-ui-inert",u=r?"inert":n?"aria-hidden":null,l=correctElements(t,e),s=new Set,c=new Set(l),a=[];w[o]||(w[o]=new WeakMap);let f=w[o];return l.forEach(function keep(e){!(!e||s.has(e))&&(s.add(e),e.parentNode&&keep(e.parentNode))}),function deep(e){!e||c.has(e)||[].forEach.call(e.children,e=>{if("script"!==(0,i.wk)(e)){if(s.has(e))deep(e);else{let t=u?e.getAttribute(u):null,n=null!==t&&"false"!==t,r=R.get(e)||0,l=u?r+1:r,i=(f.get(e)||0)+1;R.set(e,l),f.set(e,i),a.push(e),1===l&&n&&k.add(e),1===i&&e.setAttribute(o,""),!n&&u&&e.setAttribute(u,"inert"===u?"":"true")}}})}(t),s.clear(),M++,()=>{a.forEach(e=>{let t=R.get(e)||0,n=u?t-1:t,r=(f.get(e)||0)-1;R.set(e,n),f.set(e,r),n||(!k.has(e)&&u&&e.removeAttribute(u),k.delete(e)),r||e.removeAttribute(o)}),--M||(R=new WeakMap,R=new WeakMap,k=new WeakSet,w={})}}(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}let getTabbableOptions=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function getTabbableIn(e,t){let n=(0,s.ht)(e,getTabbableOptions());"prev"===t&&n.reverse();let r=n.indexOf((0,u.AW)((0,u.Me)(e))),o=n.slice(r+1);return o[0]}function getNextTabbable(e){return getTabbableIn((0,u.Me)(e).body,"next")||e}function getPreviousTabbable(e){return getTabbableIn((0,u.Me)(e).body,"prev")||e}function isOutsideEvent(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,u.r3)(n,r)}function enableFocusInside(e){let t=e.querySelectorAll("[data-tabindex]");t.forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let F={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},C=o.forwardRef(function(e,t){let[n,r]=o.useState();p(()=>{(0,u.G6)()&&r("button")},[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[createAttribute("focus-guard")]:"",style:F};return(0,l.jsx)("span",{...e,...i})}),A=o.createContext(null),O=createAttribute("portal");function FloatingPortal(e){let{children:t,id:n,root:r,preserveTabOrder:u=!0}=e,a=function(e){void 0===e&&(e={});let{id:t,root:n}=e,r=E(),u=usePortalContext(),[l,s]=o.useState(null),c=o.useRef(null);return p(()=>()=>{null==l||l.remove(),queueMicrotask(()=>{c.current=null})},[l]),p(()=>{if(!r||c.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=r,n.setAttribute(O,""),e.appendChild(n),c.current=n,s(n)},[t,r]),p(()=>{if(null===n||!r||c.current)return;let e=n||(null==u?void 0:u.portalNode);e&&!(0,i.kK)(e)&&(e=e.current),e=e||document.body;let o=null;t&&((o=document.createElement("div")).id=t,e.appendChild(o));let l=document.createElement("div");l.id=r,l.setAttribute(O,""),(e=o||e).appendChild(l),c.current=l,s(l)},[t,n,r,u]),l}({id:n,root:r}),[f,d]=o.useState(null),v=o.useRef(null),m=o.useRef(null),b=o.useRef(null),g=o.useRef(null),h=null==f?void 0:f.modal,x=null==f?void 0:f.open,y=!!f&&!f.modal&&f.open&&u&&!!(r||a);return o.useEffect(()=>{if(a&&u&&!h)return a.addEventListener("focusin",onFocus,!0),a.addEventListener("focusout",onFocus,!0),()=>{a.removeEventListener("focusin",onFocus,!0),a.removeEventListener("focusout",onFocus,!0)};function onFocus(e){if(a&&isOutsideEvent(e)){let t="focusin"===e.type;(t?enableFocusInside:function(e){let t=(0,s.ht)(e,getTabbableOptions());t.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(a)}}},[a,u,h]),o.useEffect(()=>{a&&(x||enableFocusInside(a))},[x,a]),(0,l.jsxs)(A.Provider,{value:o.useMemo(()=>({preserveTabOrder:u,beforeOutsideRef:v,afterOutsideRef:m,beforeInsideRef:b,afterInsideRef:g,portalNode:a,setFocusManagerState:d}),[u,a]),children:[y&&a&&(0,l.jsx)(C,{"data-type":"outside",ref:v,onFocus:e=>{if(isOutsideEvent(e,a)){var t;null==(t=b.current)||t.focus()}else{let e=f?f.domReference:null,t=getPreviousTabbable(e);null==t||t.focus()}}}),y&&a&&(0,l.jsx)("span",{"aria-owns":a.id,style:F}),a&&c.createPortal(t,a),y&&a&&(0,l.jsx)(C,{"data-type":"outside",ref:m,onFocus:e=>{if(isOutsideEvent(e,a)){var t;null==(t=g.current)||t.focus()}else{let t=f?f.domReference:null,n=getNextTabbable(t);null==n||n.focus(),(null==f?void 0:f.closeOnFocusOut)&&(null==f||f.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let usePortalContext=()=>o.useContext(A),P="data-floating-ui-focusable";function getFloatingFocusElement(e){return e?e.hasAttribute(P)?e:e.querySelector("["+P+"]")||e:null}function useLiteMergeRefs(e){return o.useMemo(()=>t=>{e.forEach(e=>{e&&(e.current=t)})},e)}let L=[];function getPreviouslyFocusedElement(){return L.slice().reverse().find(e=>e.isConnected)}let I=o.forwardRef(function(e,t){return(0,l.jsx)("button",{...e,type:"button",ref:t,tabIndex:-1,style:F})});function FloatingFocusManager(e){let{context:t,children:n,disabled:r=!1,order:c=["content"],guards:a=!0,initialFocus:f=0,returnFocus:d=!0,restoreFocus:v=!1,modal:m=!0,visuallyHiddenDismiss:b=!1,closeOnFocusOut:g=!0,outsideElementsInert:E=!1,getInsideElements:h=()=>[]}=e,{open:x,onOpenChange:y,events:R,dataRef:k,elements:{domReference:w,floating:M}}=t,A=useEffectEvent(()=>{var e;return null==(e=k.current.floatingContext)?void 0:e.nodeId}),O=useEffectEvent(h),P="number"==typeof f&&f<0,S=(0,u.Ie)(w)&&P,T=supportsInert(),K=!T||a,q=!K||T&&E,D=useLatestRef(c),W=useLatestRef(f),N=useLatestRef(d),j=useFloatingTree(),_=usePortalContext(),B=o.useRef(null),H=o.useRef(null),U=o.useRef(!1),z=o.useRef(!1),Y=o.useRef(-1),X=null!=_,V=getFloatingFocusElement(M),G=useEffectEvent(function(e){return void 0===e&&(e=V),e?(0,s.ht)(e,getTabbableOptions()):[]}),Q=useEffectEvent(e=>{let t=G(e);return D.current.map(e=>w&&"reference"===e?w:V&&"floating"===e?V:t).filter(Boolean).flat()});o.useEffect(()=>{if(r||!m)return;function onKeyDown(e){if("Tab"===e.key){(0,u.r3)(V,(0,u.AW)((0,u.Me)(V)))&&0===G().length&&!S&&(0,u.p7)(e);let t=Q(),n=(0,u.U9)(e);"reference"===D.current[0]&&n===w&&((0,u.p7)(e),e.shiftKey?enqueueFocus(t[t.length-1]):enqueueFocus(t[1])),"floating"===D.current[1]&&n===V&&e.shiftKey&&((0,u.p7)(e),enqueueFocus(t[0]))}}let e=(0,u.Me)(V);return e.addEventListener("keydown",onKeyDown),()=>{e.removeEventListener("keydown",onKeyDown)}},[r,w,V,m,D,S,G,Q]),o.useEffect(()=>{if(!r&&M)return M.addEventListener("focusin",handleFocusIn),()=>{M.removeEventListener("focusin",handleFocusIn)};function handleFocusIn(e){let t=(0,u.U9)(e),n=G(),r=n.indexOf(t);-1!==r&&(Y.current=r)}},[r,M,G]),o.useEffect(()=>{if(!r&&g&&M&&(0,i.Re)(w))return w.addEventListener("focusout",handleFocusOutside),w.addEventListener("pointerdown",handlePointerDown),M.addEventListener("focusout",handleFocusOutside),()=>{w.removeEventListener("focusout",handleFocusOutside),w.removeEventListener("pointerdown",handlePointerDown),M.removeEventListener("focusout",handleFocusOutside)};function handlePointerDown(){z.current=!0,setTimeout(()=>{z.current=!1})}function handleFocusOutside(e){let t=e.relatedTarget;queueMicrotask(()=>{let n=A(),r=!((0,u.r3)(w,t)||(0,u.r3)(M,t)||(0,u.r3)(t,M)||(0,u.r3)(null==_?void 0:_.portalNode,t)||null!=t&&t.hasAttribute(createAttribute("focus-guard"))||j&&(getChildren(j.nodesRef.current,n).find(e=>{var n,r;return(0,u.r3)(null==(n=e.context)?void 0:n.elements.floating,t)||(0,u.r3)(null==(r=e.context)?void 0:r.elements.domReference,t)})||getAncestors(j.nodesRef.current,n).find(e=>{var n,r,o;return[null==(n=e.context)?void 0:n.elements.floating,getFloatingFocusElement(null==(r=e.context)?void 0:r.elements.floating)].includes(t)||(null==(o=e.context)?void 0:o.elements.domReference)===t})));if(v&&r&&(0,u.AW)((0,u.Me)(V))===(0,u.Me)(V).body){(0,i.Re)(V)&&V.focus();let e=Y.current,t=G(),n=t[e]||t[t.length-1]||V;(0,i.Re)(n)&&n.focus()}(S||!m)&&t&&r&&!z.current&&t!==getPreviouslyFocusedElement()&&(U.current=!0,y(!1,e,"focus-out"))})}},[r,w,M,V,m,j,_,y,g,v,G,S,A]);let Z=o.useRef(null),J=o.useRef(null),$=useLiteMergeRefs([Z,null==_?void 0:_.beforeInsideRef]),ee=useLiteMergeRefs([J,null==_?void 0:_.afterInsideRef]);function renderDismissButton(e){return!r&&b&&m?(0,l.jsx)(I,{ref:"start"===e?B:H,onClick:e=>y(!1,e.nativeEvent),children:"string"==typeof b?b:"Dismiss"}):null}o.useEffect(()=>{var e,t;if(r||!M)return;let n=Array.from((null==_||null==(e=_.portalNode)?void 0:e.querySelectorAll("["+createAttribute("portal")+"]"))||[]),o=j?getAncestors(j.nodesRef.current,A()):[],l=j&&!m?o.map(e=>{var t;return null==(t=e.context)?void 0:t.elements.floating}):[],i=null==(t=o.find(e=>{var t;return(0,u.Ie)((null==(t=e.context)?void 0:t.elements.domReference)||null)}))||null==(t=t.context)?void 0:t.elements.domReference,s=[M,i,...n,...l,...O(),B.current,H.current,Z.current,J.current,null==_?void 0:_.beforeOutsideRef.current,null==_?void 0:_.afterOutsideRef.current,D.current.includes("reference")||S?w:null].filter(e=>null!=e),c=m||S?markOthers(s,!q,q):markOthers(s);return()=>{c()}},[r,w,M,m,D,_,S,K,q,j,A,O]),p(()=>{if(r||!(0,i.Re)(V))return;let e=(0,u.Me)(V),t=(0,u.AW)(e);queueMicrotask(()=>{let e=Q(V),n=W.current,r=("number"==typeof n?e[n]:n.current)||V,o=(0,u.r3)(V,t);P||o||!x||enqueueFocus(r,{preventScroll:r===V})})},[r,x,V,P,Q,W]),p(()=>{if(r||!V)return;let e=!1,t=!1,n=(0,u.Me)(V),o=(0,u.AW)(n),l=k.current,c=l.openEvent;function onOpenChange(n){let{open:r,reason:o,event:l,nested:i}=n;if(r&&(c=l),"escape-key"===o&&(t=!0),["hover","safe-polygon"].includes(o)&&"mouseleave"===l.type&&(U.current=!0),"outside-press"===o){if(i)U.current=!1,e=!0;else if((0,u.Zj)(l)||(0,u.cr)(l))U.current=!1;else{let t=!1;document.createElement("div").focus({get preventScroll(){return t=!0,!1}}),t?(U.current=!1,e=!0):U.current=!0}}}L=L.filter(e=>e.isConnected),o&&"body"!==(0,i.wk)(o)&&(L.push(o),L.length>20&&(L=L.slice(-20))),R.on("openchange",onOpenChange);let a=n.createElement("span");return a.setAttribute("tabindex","-1"),a.setAttribute("aria-hidden","true"),Object.assign(a.style,F),X&&w&&w.insertAdjacentElement("afterend",a),()=>{R.off("openchange",onOpenChange);let r=(0,u.AW)(n),o=(0,u.r3)(M,r)||j&&getChildren(j.nodesRef.current,A()).some(e=>{var t;return(0,u.r3)(null==(t=e.context)?void 0:t.elements.floating,r)});(o||c&&["click","mousedown"].includes(c.type))&&(t=!0);let l="boolean"==typeof N.current?t&&w?w:getPreviouslyFocusedElement()||a:N.current.current||a;queueMicrotask(()=>{let t=function(e){let t=getTabbableOptions();return(0,s.Wq)(e,t)?e:(0,s.ht)(e,t)[0]||e}(l);N.current&&!U.current&&(0,i.Re)(t)&&(t===r||r===n.body||o)&&t.focus({preventScroll:e}),a.remove()})}},[r,M,V,N,k,R,j,X,w,A]),o.useEffect(()=>{queueMicrotask(()=>{U.current=!1})},[r]),p(()=>{if(!r&&_)return _.setFocusManagerState({modal:m,closeOnFocusOut:g,open:x,onOpenChange:y,domReference:w}),()=>{_.setFocusManagerState(null)}},[r,_,m,x,y,g,w]),p(()=>{if(r||!V||"function"!=typeof MutationObserver||P)return;let handleMutation=()=>{let e=V.getAttribute("tabindex"),t=G(),n=(0,u.AW)((0,u.Me)(M)),r=t.indexOf(n);-1!==r&&(Y.current=r),D.current.includes("floating")||n!==w&&0===t.length?"0"!==e&&V.setAttribute("tabindex","0"):"-1"!==e&&V.setAttribute("tabindex","-1")};handleMutation();let e=new MutationObserver(handleMutation);return e.observe(V,{childList:!0,subtree:!0,attributes:!0}),()=>{e.disconnect()}},[r,M,V,w,D,G,P]);let et=!r&&K&&(!m||!S)&&(X||m);return(0,l.jsxs)(l.Fragment,{children:[et&&(0,l.jsx)(C,{"data-type":"inside",ref:$,onFocus:e=>{if(m){let e=Q();enqueueFocus("reference"===c[0]?e[0]:e[e.length-1])}else if(null!=_&&_.preserveTabOrder&&_.portalNode){if(U.current=!1,isOutsideEvent(e,_.portalNode)){let e=getNextTabbable(w);null==e||e.focus()}else{var t;null==(t=_.beforeOutsideRef.current)||t.focus()}}}}),!S&&renderDismissButton("start"),n,renderDismissButton("end"),et&&(0,l.jsx)(C,{"data-type":"inside",ref:ee,onFocus:e=>{if(m)enqueueFocus(Q()[0]);else if(null!=_&&_.preserveTabOrder&&_.portalNode){if(g&&(U.current=!0),isOutsideEvent(e,_.portalNode)){let e=getPreviousTabbable(w);null==e||e.focus()}else{var t;null==(t=_.afterOutsideRef.current)||t.focus()}}}})]})}let S={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},T={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeProp=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function useDismiss(e,t){void 0===t&&(t={});let{open:n,onOpenChange:r,elements:l,dataRef:s}=e,{enabled:c=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:v=!1,referencePressEvent:p="pointerdown",ancestorScroll:m=!1,bubbles:b,capture:g}=t,E=useFloatingTree(),h=useEffectEvent("function"==typeof f?f:()=>!1),x="function"==typeof f?h:f,y=o.useRef(!1),R=o.useRef(!1),{escapeKey:k,outsidePress:w}=normalizeProp(b),{escapeKey:M,outsidePress:F}=normalizeProp(g),C=o.useRef(!1),A=useEffectEvent(e=>{var t;if(!n||!c||!a||"Escape"!==e.key||C.current)return;let o=null==(t=s.current.floatingContext)?void 0:t.nodeId,l=E?getChildren(E.nodesRef.current,o):[];if(!k&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}r(!1,(0,u.MM)(e)?e.nativeEvent:e,"escape-key")}),O=useEffectEvent(e=>{var t;let callback=()=>{var t;A(e),null==(t=(0,u.U9)(e))||t.removeEventListener("keydown",callback)};null==(t=(0,u.U9)(e))||t.addEventListener("keydown",callback)}),P=useEffectEvent(e=>{var t;let n=y.current;y.current=!1;let o=R.current;if(R.current=!1,"click"===d&&o||n||"function"==typeof x&&!x(e))return;let c=(0,u.U9)(e),a="["+createAttribute("inert")+"]",f=(0,u.Me)(l.floating).querySelectorAll(a),v=(0,i.kK)(c)?c:null;for(;v&&!(0,i.Py)(v);){let e=(0,i.Ow)(v);if((0,i.Py)(e)||!(0,i.kK)(e))break;v=e}if(f.length&&(0,i.kK)(c)&&!(0,u.ex)(c)&&!(0,u.r3)(c,l.floating)&&Array.from(f).every(e=>!(0,u.r3)(v,e)))return;if((0,i.Re)(c)&&K){let t=(0,i.Py)(c),n=(0,i.Dx)(c),r=/auto|scroll/,o=t||r.test(n.overflowX),u=t||r.test(n.overflowY),l=o&&c.clientWidth>0&&c.scrollWidth>c.clientWidth,s=u&&c.clientHeight>0&&c.scrollHeight>c.clientHeight,a="rtl"===n.direction,f=s&&(a?e.offsetX<=c.offsetWidth-c.clientWidth:e.offsetX>c.clientWidth),d=l&&e.offsetY>c.clientHeight;if(f||d)return}let p=null==(t=s.current.floatingContext)?void 0:t.nodeId,m=E&&getChildren(E.nodesRef.current,p).some(t=>{var n;return(0,u.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,u.Pe)(e,l.floating)||(0,u.Pe)(e,l.domReference)||m)return;let b=E?getChildren(E.nodesRef.current,p):[];if(b.length>0){let e=!0;if(b.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}r(!1,e,"outside-press")}),L=useEffectEvent(e=>{var t;let callback=()=>{var t;P(e),null==(t=(0,u.U9)(e))||t.removeEventListener(d,callback)};null==(t=(0,u.U9)(e))||t.addEventListener(d,callback)});o.useEffect(()=>{if(!n||!c)return;s.current.__escapeKeyBubbles=k,s.current.__outsidePressBubbles=w;let e=-1;function onScroll(e){r(!1,e,"ancestor-scroll")}function handleCompositionStart(){window.clearTimeout(e),C.current=!0}function handleCompositionEnd(){e=window.setTimeout(()=>{C.current=!1},(0,i.Pf)()?5:0)}let t=(0,u.Me)(l.floating);a&&(t.addEventListener("keydown",M?O:A,M),t.addEventListener("compositionstart",handleCompositionStart),t.addEventListener("compositionend",handleCompositionEnd)),x&&t.addEventListener(d,F?L:P,F);let o=[];return m&&((0,i.kK)(l.domReference)&&(o=(0,i.Kx)(l.domReference)),(0,i.kK)(l.floating)&&(o=o.concat((0,i.Kx)(l.floating))),!(0,i.kK)(l.reference)&&l.reference&&l.reference.contextElement&&(o=o.concat((0,i.Kx)(l.reference.contextElement)))),(o=o.filter(e=>{var n;return e!==(null==(n=t.defaultView)?void 0:n.visualViewport)})).forEach(e=>{e.addEventListener("scroll",onScroll,{passive:!0})}),()=>{a&&(t.removeEventListener("keydown",M?O:A,M),t.removeEventListener("compositionstart",handleCompositionStart),t.removeEventListener("compositionend",handleCompositionEnd)),x&&t.removeEventListener(d,F?L:P,F),o.forEach(e=>{e.removeEventListener("scroll",onScroll)}),window.clearTimeout(e)}},[s,l,a,x,d,n,r,m,c,k,w,A,M,O,P,F,L]),o.useEffect(()=>{y.current=!1},[x,d]);let I=o.useMemo(()=>({onKeyDown:A,...v&&{[S[p]]:e=>{r(!1,e.nativeEvent,"reference-press")},..."click"!==p&&{onClick(e){r(!1,e.nativeEvent,"reference-press")}}}}),[A,r,v,p]),K=o.useMemo(()=>({onKeyDown:A,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[T[d]]:()=>{y.current=!0}}),[A,d]);return o.useMemo(()=>c?{reference:I,floating:K}:{},[c,I,K])}function useFloating(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:r}=e,u=E(),l=o.useRef({}),[i]=o.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),s=null!=useFloatingParentNodeId(),[c,a]=o.useState(r.reference),f=useEffectEvent((e,t,r)=>{l.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)}),d=o.useMemo(()=>({setPositionReference:a}),[]),v=o.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return o.useMemo(()=>({dataRef:l,open:t,onOpenChange:f,elements:v,events:i,floatingId:u,refs:d}),[t,f,v,i,u,d])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,u=r.elements,[l,s]=o.useState(null),[c,f]=o.useState(null),d=null==u?void 0:u.domReference,v=d||l,m=o.useRef(null),b=useFloatingTree();p(()=>{v&&(m.current=v)},[v]);let g=(0,a.YF)({...e,elements:{...u,...c&&{reference:c}}}),h=o.useCallback(e=>{let t=(0,i.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;f(t),g.refs.setReference(t)},[g.refs]),x=o.useCallback(e=>{((0,i.kK)(e)||null===e)&&(m.current=e,s(e)),((0,i.kK)(g.refs.reference.current)||null===g.refs.reference.current||null!==e&&!(0,i.kK)(e))&&g.refs.setReference(e)},[g.refs]),y=o.useMemo(()=>({...g.refs,setReference:x,setPositionReference:h,domReference:m}),[g.refs,x,h]),R=o.useMemo(()=>({...g.elements,domReference:v}),[g.elements,v]),k=o.useMemo(()=>({...g,...r,refs:y,elements:R,nodeId:t}),[g,y,R,t,r]);return p(()=>{r.dataRef.current.floatingContext=k;let e=null==b?void 0:b.nodesRef.current.find(e=>e.id===t);e&&(e.context=k)}),o.useMemo(()=>({...g,context:k,refs:y,elements:R}),[g,y,R,k])}let K="active",q="selected";function mergeProps(e,t,n){let r=new Map,o="item"===n,u=e;if(o&&e){let{[K]:t,[q]:n,...r}=e;u=r}return{..."floating"===n&&{tabIndex:-1,[P]:""},...u,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,u]=t;if(!(o&&[K,q].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof u){var l;null==(l=r.get(n))||l.push(u),e[n]=function(){for(var e,t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=u}}),e),{})}}function useInteractions(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),r=e.map(e=>null==e?void 0:e.item),u=o.useCallback(t=>mergeProps(t,e,"reference"),t),l=o.useCallback(t=>mergeProps(t,e,"floating"),n),i=o.useCallback(t=>mergeProps(t,e,"item"),r);return o.useMemo(()=>({getReferenceProps:u,getFloatingProps:l,getItemProps:i}),[u,l,i])}let D=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function useRole(e,t){var n;void 0===t&&(t={});let{open:r,floatingId:u}=e,{enabled:l=!0,role:i="dialog"}=t,s=null!=(n=D.get(i))?n:i,c=E(),a=useFloatingParentNodeId(),f=null!=a,d=o.useMemo(()=>"tooltip"===s||"label"===i?{["aria-"+("label"===i?"labelledby":"describedby")]:r?u:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===s?"dialog":s,"aria-controls":r?u:void 0,..."listbox"===s&&{role:"combobox"},..."menu"===s&&{id:c},..."menu"===s&&f&&{role:"menuitem"},..."select"===i&&{"aria-autocomplete":"none"},..."combobox"===i&&{"aria-autocomplete":"list"}},[s,u,f,r,c,i]),v=o.useMemo(()=>{let e={id:u,...s&&{role:s}};return"tooltip"===s||"label"===i?e:{...e,..."menu"===s&&{"aria-labelledby":c}}},[s,u,c,i]),p=o.useCallback(e=>{let{active:t,selected:n}=e,r={role:"option",...t&&{id:u+"-option"}};switch(i){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}},[u,i]);return o.useMemo(()=>l?{reference:d,floating:v,item:p}:{},[l,d,v,p])}}}]);